<html>
	<head>
		<title>Game Cloud</title>
		<link type="text/css" rel="stylesheet" href="/static/css/materialize.css" media="screen,projection" />
		<link type="text/css" rel="stylesheet" href="/static/css/style.css" />
	</head>
	<body>
		<div class="modal in" id="modal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" style="overflow: hidden; display: block; width: 35%;height:30%; margin: 0px auto;">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                        	<!-- <h5 class="modal-title">用户登录</h5> -->
                        	<label class="modal-title" style="font-size:22px;color:#333">用户登录</label>
                        </div>
                        <div class="slice"></div>
                        <div class="modal-body" style="margin-top:22px">
                            <form class="form-horizontal" role="form" id="login_form">
                                <div class="form-group">
                                    <label class="col-sm-1 control-label">登录名:</label>
                                    <input type="email" id="user_name" name="user_name" style="margin-left:2%;width:60%;">
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-1 control-label">密码:</label>
                                    <input type="password" id="password" name="password" style="margin-left:4%;width:60%;">
                                </div>
                            </form>
                        </div>
                        <div class="slice"></div>
                        <div class="modal-foot" style="margin-top:10px">
                        	<button type="submit" class="btn btn-primary right" id="sign_in">登录</button>
                        </div>
                    </div>
                </div>
            </div>
		<script type="text/javascript" src="/static/js/jquery.min.js"></script>
		<script type="text/javascript" src="/static/js/materialize.js"></script>
		<script type="text/javascript">
            if(window.parent.window.document.getElementById("loading_container")) {
                window.parent.window.document.getElementById("loading_container").style.display = "none";
            }
			$('#modal1').openModal();
            $("#sign_in").click(function() {
            	var username = $("#user_name").val();
            	var passwd = $("#password").val();
            	var authorData = {
            		username:username,
                    passwd:passwd
            	}
                $.ajax({
                    method:'GET',
                    type:'HTTP',
                    data:authorData,
                    url:'/authoration',
                    success: function(response){
                        if(response == 0) {
                        	$('#modal1').closeModal();
                        	$(".collapsible-header").eq(0).trigger("click");
                        } else {
                        	alert('Username or Password is incorrected!');
                        }
                    },
                    error: function() {
                        alert('Something wrong!');
                    }
                })
            });
		</script>
	</body>
</html>