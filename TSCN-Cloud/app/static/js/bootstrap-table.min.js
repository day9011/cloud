!function($){"use strict";var sprintf=function(t){var i=arguments,e=!0,o=1;return t=t.replace(/%s/g,function(){var t=i[o++];return"undefined"==typeof t?(e=!1,""):t}),e?t:""},BootstrapTable=function(t,i){this.options=i,this.$el=$(t),this.$el_=this.$el.clone(),this.init()};BootstrapTable.DEFAULTS={classes:"table table-hover",height:void 0,undefinedText:"-",sortName:void 0,sortOrder:"asc",striped:!1,columns:[],data:[],method:"get",url:void 0,queryParams:{},pagination:!1,sidePagination:"client",totalRows:0,pageNumber:1,pageSize:10,pageList:[10,20,30,40,50],onClickRow:function(){return!1},onSort:function(){return!1},onCheck:function(){return!1},onUncheck:function(){return!1},onCheckAll:function(){return!1},onUncheckAll:function(){return!1}},BootstrapTable.prototype.init=function(){this.initContainer(),this.initHeader(),this.initData(),this.initPagination(),this.initBody(),this.initServer()},BootstrapTable.prototype.initContainer=function(){this.$container=$(['<div class="fixed-table-container">','<div class="fixed-table-header"></div>','<div class="fixed-table-body"></div>','<div class="fixed-table-pagination"></div>',"</div>"].join("")),this.$container.insertAfter(this.$el),this.$container.find(".fixed-table-body").append(this.$el),this.$container.after('<div class="clearfix"></div>'),this.options.height&&this.$container.css("height",this.options.height+"px"),this.$el.addClass(this.options.classes),this.options.striped&&this.$el.addClass("table-striped")},BootstrapTable.prototype.initHeader=function(){var t=this,i=[],e=[];this.$header=this.$el.find("thead"),this.$header.length||(this.$header=$("<thead></thead>").appendTo(this.$el)),this.$header.find("tr").length||this.$header.append("<tr></tr>"),this.$header.find("th").each(function(){var t=$.extend({},{title:$(this).text()},$(this).data());i.push(t)}),this.options.columns=$.extend(i,this.options.columns),this.header={fields:[],styles:[],formatters:[],sorters:[]},$.each(this.options.columns,function(i,o){{var s="",a=sprintf("text-align: %s; ",o.align)+sprintf("vertical-align: %s; ",o.valign);t.options.sortOrder||o.order||"asc"}t.header.fields.push(o.field),t.header.styles.push(a),t.header.formatters.push(o.formatter),t.header.sorters.push(o.sorter),a=sprintf("width: %spx; ",o.checkbox||o.radio?36:o.width),a+=o.sortable?"cursor: pointer; ":"",e.push("<th"+sprintf(' style="%s"',a)+">"),e.push('<div class="th-inner">'),s=o.title,t.options.sortName===o.field&&o.sortable&&(s+=t.getCaretHtml()),o.checkbox&&(s='<input name="btSelectAll" type="checkbox" class="checkbox" />',t.header.stateField=o.field),o.radio&&(s="",t.header.stateField=o.field),e.push(s),e.push("</div>"),e.push("</th>")}),this.$header.find("tr").html(e.join("")),this.$header.find("th").each(function(e){$(this).data(i[e]),i[e].sortable&&$(this).click($.proxy(t.onSort,t))}),this.$selectAll=this.$header.find('[name="btSelectAll"]'),this.$selectAll.off("click").on("click",function(){var i=$(this).prop("checked");t[i?"checkAll":"uncheckAll"]()})},BootstrapTable.prototype.initData=function(t,i){this.data=i?this.data.concat(t):t||this.options.data,this.initSort()},BootstrapTable.prototype.initSort=function(){var name=this.options.sortName,order="desc"===this.options.sortOrder?-1:1,index=$.inArray(this.options.sortName,this.header.fields);if(-1!==index){var sorter=this.header.sorters[index];this.data.sort(function(a,b){return"function"==typeof sorter?order*sorter(a[name],b[name]):"string"==typeof sorter?order*eval(sorter+"(a[name], b[name])"):a[name]===b[name]?0:a[name]<b[name]?-1*order:order})}},BootstrapTable.prototype.onSort=function(t){var i=$(t.currentTarget);this.$header.find("span.order").remove(),this.options.sortName=i.data("field"),this.options.sortOrder="asc"===i.data("order")?"desc":"asc",this.options.onSort(this.options.sortName,this.options.sortOrder),i.data("order",this.options.sortOrder),i.find(".th-inner").append(this.getCaretHtml()),this.initSort(),this.initBody()},BootstrapTable.prototype.initPagination=function(){this.options.pagination&&(this.$pagination=this.$container.find(".fixed-table-pagination"),"client"===this.options.sidePagination&&(this.options.totalRows=this.data.length),this.updatePagination())},BootstrapTable.prototype.updatePagination=function(){var t,i,e,o,s,a,n,r,p,h=this,l=[];for(this.totalPages=0,this.options.totalRows&&(this.totalPages=~~((this.options.totalRows-1)/this.options.pageSize)+1),this.totalPages>0&&this.options.pageNumber>this.totalPages&&(this.options.pageNumber=this.totalPages),this.pageFrom=(this.options.pageNumber-1)*this.options.pageSize+1,this.pageTo=this.options.pageNumber*this.options.pageSize,this.pageTo>this.options.totalRows&&(this.pageTo=this.options.totalRows),l.push('<div class="pull-left pagination">','<div class="pagination-info">',sprintf("Showing %s to %s of %s rows",this.pageFrom,this.pageTo,this.options.totalRows),"</div>","</div>",'<div class="pull-right">','<ul class="pagination">','<li class="page-first"><a href="javascript:void(0)">&lt;&lt;</a></li>','<li class="page-pre"><a href="javascript:void(0)">&lt;</a></li>'),this.totalPages<5?(i=1,e=this.totalPages):(i=this.options.pageNumber-2,e=i+4,1>i&&(i=1,e=5),e>this.totalPages&&(e=this.totalPages,i=e-4)),t=i;e>=t;t++)l.push('<li class="page-number'+(t===this.options.pageNumber?" active":"")+'">','<a href="javascript:void(0)">',t,"</a>","</li>");l.push('<li class="page-next"><a href="javascript:void(0)">&gt;</a></li>','<li class="page-last"><a href="javascript:void(0)">&gt;&gt;</a></li>',"</ul>","</div>"),l.push('<div class="pagination btn-group dropup page-list">','<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">',this.options.pageSize,' <span class="caret"></span>',"</button>",'<ul class="dropdown-menu" role="menu">'),$.each(this.options.pageList,function(t,i){var e=i===h.options.pageSize?' class="active"':"";l.push(sprintf('<li%s><a href="javascript:void(0)">%s</a></li>',e,i))}),l.push("</ul>","</div>"),this.$pagination.html(l.join("")),o=this.$pagination.find(".page-list a"),s=this.$pagination.find(".page-first"),a=this.$pagination.find(".page-pre"),n=this.$pagination.find(".page-next"),r=this.$pagination.find(".page-last"),p=this.$pagination.find(".page-number"),this.options.pageNumber<=1&&(s.addClass("disabled"),a.addClass("disabled")),this.options.pageNumber>=this.totalPages&&(n.addClass("disabled"),r.addClass("disabled")),o.off("click").on("click",$.proxy(this.onPageListChange,this)),s.off("click").on("click",$.proxy(this.onPageFirst,this)),a.off("click").on("click",$.proxy(this.onPagePre,this)),n.off("click").on("click",$.proxy(this.onPageNext,this)),r.off("click").on("click",$.proxy(this.onPageLast,this)),p.off("click").on("click",$.proxy(this.onPageNumber,this))},BootstrapTable.prototype.onPageListChange=function(t){this.options.pageSize=+$(t.currentTarget).text(),this.updatePagination(),this.initBody()},BootstrapTable.prototype.onPageFirst=function(){this.options.pageNumber=1,this.updatePagination(),this.initBody()},BootstrapTable.prototype.onPagePre=function(){this.options.pageNumber--,this.updatePagination(),this.initBody()},BootstrapTable.prototype.onPageNext=function(){this.options.pageNumber++,this.updatePagination(),this.initBody()},BootstrapTable.prototype.onPageLast=function(){this.options.pageNumber=this.totalPages,this.updatePagination(),this.initBody()},BootstrapTable.prototype.onPageNumber=function(t){this.options.pageNumber=+$(t.currentTarget).text(),this.updatePagination(),this.initBody()},BootstrapTable.prototype.initBody=function(){var t=this,i=[];this.$body=this.$el.find("tbody"),this.$body.length||(this.$body=$("<tbody></tbody>").appendTo(this.$el)),this.options.pagination||(this.pageFrom=1,this.pageTo=this.data.length);for(var e=this.pageFrom-1;e<this.pageTo;e++){var o=this.data[e];i.push('<tr data-index="'+e+'">'),$.each(t.header.fields,function(s,a){var n="",r=o[a],p="";"function"==typeof t.header.formatters[s]&&(r=t.header.formatters[s](r,o)),n=["<td"+sprintf(' style="%s"',t.header.styles[s])+">","undefined"==typeof r?t.options.undefinedText:r,"</td>"].join(""),(t.options.columns[s].checkbox||t.options.columns[s].radio)&&(p=t.options.columns[s].checkbox?"checkbox":p,p=t.options.columns[s].radio?"radio":p,n=["<td>",'<input name="btSelectItem" class="checkbox" data-index="'+e+'"'+sprintf(' type="%s"',p)+sprintf(' checked="%s"',r?"checked":void 0)+" />","</td>"].join("")),i.push(n)}),i.push("</tr>")}this.$body.html(i.join("")),this.$body.find("tr").off("click").on("click",function(){t.options.onClickRow(t.data[$(this).data("index")])}),this.$selectItem=this.$body.find('[name="btSelectItem"]'),this.$selectItem.off("click").on("click",function(){var i=t.data.length===t.$selectItem.filter(":checked").length;t.$selectAll.prop("checked",i),t.data[$(this).data("index")][t.header.stateField]=$(this).prop("checked")}),this.resetView()},BootstrapTable.prototype.initServer=function(){var t=this;this.options.url&&$.ajax({type:this.options.method,url:this.options.url,data:this.options.queryParams,contentType:"application/json",dataType:"json",success:function(i){t.load(i)}})},BootstrapTable.prototype.getCaretHtml=function(){return['<span class="order'+("desc"===this.options.sortOrder?"":" dropup")+'">','<span class="caret" style="margin: 10px 5px;"></span>',"</span>"].join("")},BootstrapTable.prototype.resetView=function(){var t=this.header;this.$header.find(".th-inner").each(function(i){$(this).attr("style",t.styles[i]).css("width",$(this).parent().width()+"px")})},BootstrapTable.prototype.updateRows=function(t){var i=this;$.each(this.data,function(e,o){o[i.header.stateField]=t})},BootstrapTable.prototype.load=function(t){this.initData(t),this.initPagination(),this.initBody()},BootstrapTable.prototype.append=function(t){this.initData(t,!0),this.initBody()},BootstrapTable.prototype.mergeCells=function(t){var i,e,o=t.index,s=$.inArray(t.field,this.header.fields),a=t.rowspan||1,n=t.colspan||1,r=this.$body.find("tr"),p=r.eq(o).find("td").eq(s);if(!(0>o||0>s||o>=this.data.length)){for(i=o;o+a>i;i++)for(e=s;s+n>e;e++)r.eq(i).find("td").eq(e).hide();p.attr("rowspan",a).attr("colspan",n).show()}},BootstrapTable.prototype.getSelections=function(){var t=this;return $.grep(this.data,function(i){return i[t.header.stateField]})},BootstrapTable.prototype.checkAll=function(){this.$selectAll.prop("checked",!0),this.$selectItem.prop("checked",!0),this.updateRows(!0)},BootstrapTable.prototype.uncheckAll=function(){this.$selectAll.prop("checked",!1),this.$selectItem.prop("checked",!1),this.updateRows(!1)},BootstrapTable.prototype.destroy=function(){return this.$container.replaceWith(this.$el_),this.$el_},$.fn.bootstrapTable=function(t,i){var e,o=["getSelections","load","append","mergeCells","checkAll","uncheckAll","destroy"];return this.each(function(){var s=$(this),a=s.data("bootstrap.table"),n=$.extend({},BootstrapTable.DEFAULTS,s.data(),"object"==typeof t&&t);if(a||s.data("bootstrap.table",a=new BootstrapTable(this,n)),"string"==typeof t){if($.inArray(t,o)<0)throw"Unknown method: "+t;e=a[t](i)}}),e?e:this},$.fn.bootstrapTable.Constructor=BootstrapTable,$(function(){$('[data-toggle="table"]').bootstrapTable()})}(jQuery);